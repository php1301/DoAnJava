/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.awt.Color;
import java.awt.Image;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URISyntaxException;
import java.net.URL;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.filechooser.FileNameExtensionFilter;
import kong.unirest.Unirest;
import org.mindrot.jbcrypt.BCrypt;
import model.Database;
/**
 *
 * @author Hp
 */
public class Regis extends javax.swing.JFrame {
    Connection conn=null;
    PreparedStatement pst=null;
    String driver = "com.mysql.cj.jdbc.Driver";
    Statement stat=null;
    File file=null;
    /**
     * Creates new form Regis
     */
    public Regis() {
        initComponents();
        setResizable(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        title = new javax.swing.JLabel();
        Username = new javax.swing.JLabel();
        Email = new javax.swing.JLabel();
        SDT = new javax.swing.JLabel();
        Hoten = new javax.swing.JLabel();
        pssw = new javax.swing.JLabel();
        confirmpssw = new javax.swing.JLabel();
        txtusername = new javax.swing.JTextField();
        txtphonen = new javax.swing.JTextField();
        txtfullname = new javax.swing.JTextField();
        txtmail = new javax.swing.JTextField();
        REGIS = new javax.swing.JButton();
        RESET = new javax.swing.JButton();
        CANCEL = new javax.swing.JButton();
        txtconpass = new javax.swing.JPasswordField();
        txtpass = new javax.swing.JPasswordField();
        notifimail = new javax.swing.JLabel();
        notifiphone = new javax.swing.JLabel();
        notifipass = new javax.swing.JLabel();
        notificonfirmpass = new javax.swing.JLabel();
        notfiuser = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        txtimage = new javax.swing.JTextField();
        notifiimg = new javax.swing.JLabel();
        Addresstxt = new javax.swing.JTextField();
        Address = new javax.swing.JLabel();
        btOpenFile = new javax.swing.JButton();
        imageSection = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        datetxt = new com.toedter.calendar.JDateChooser();
        background = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        title.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        title.setText("    REGISTER FOR FREE ACCOUNT");
        jPanel1.add(title, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 40, 330, 40));

        Username.setText("Username");
        jPanel1.add(Username, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 100, -1, -1));

        Email.setText("Email");
        jPanel1.add(Email, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 150, -1, -1));

        SDT.setText("Phone number");
        jPanel1.add(SDT, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 300, -1, -1));

        Hoten.setText("Password");
        jPanel1.add(Hoten, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 400, -1, -1));

        pssw.setText("Full Name");
        jPanel1.add(pssw, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 250, -1, -1));

        confirmpssw.setText("Confirm Password");
        jPanel1.add(confirmpssw, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 450, -1, 20));

        txtusername.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtusernameFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtusernameFocusLost(evt);
            }
        });
        txtusername.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtusernameActionPerformed(evt);
            }
        });
        txtusername.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtusernameKeyReleased(evt);
            }
        });
        jPanel1.add(txtusername, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 120, 250, -1));

        txtphonen.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtphonenFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtphonenFocusLost(evt);
            }
        });
        txtphonen.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtphonenActionPerformed(evt);
            }
        });
        txtphonen.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtphonenKeyReleased(evt);
            }
        });
        jPanel1.add(txtphonen, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 320, 250, -1));

        txtfullname.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfullnameFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfullnameFocusLost(evt);
            }
        });
        jPanel1.add(txtfullname, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 270, 250, -1));

        txtmail.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtmailFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtmailFocusLost(evt);
            }
        });
        txtmail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtmailActionPerformed(evt);
            }
        });
        txtmail.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtmailKeyPressed(evt);
            }
        });
        jPanel1.add(txtmail, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 170, 250, -1));

        REGIS.setText("REGISTER");
        REGIS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                REGISActionPerformed(evt);
            }
        });
        jPanel1.add(REGIS, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 590, -1, -1));

        RESET.setText("RESET");
        RESET.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                RESETMouseClicked(evt);
            }
        });
        RESET.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                RESETActionPerformed(evt);
            }
        });
        jPanel1.add(RESET, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 590, -1, -1));

        CANCEL.setText("CANCEL");
        CANCEL.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                CANCELMouseClicked(evt);
            }
        });
        CANCEL.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CANCELActionPerformed(evt);
            }
        });
        jPanel1.add(CANCEL, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 590, -1, -1));

        txtconpass.setText("jPasswordField1");
        txtconpass.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtconpassActionPerformed(evt);
            }
        });
        txtconpass.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtconpassKeyReleased(evt);
            }
        });
        jPanel1.add(txtconpass, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 470, 250, -1));

        txtpass.setText("jPasswordField1");
        txtpass.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtpassKeyReleased(evt);
            }
        });
        jPanel1.add(txtpass, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 420, 250, -1));

        notifimail.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notifimail.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(notifimail, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 170, 100, 20));

        notifiphone.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notifiphone.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(notifiphone, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 320, 120, 20));

        notifipass.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notifipass.setForeground(new java.awt.Color(255, 0, 0));
        notifipass.setToolTipText("");
        jPanel1.add(notifipass, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 420, 230, 20));

        notificonfirmpass.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notificonfirmpass.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(notificonfirmpass, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 470, 220, 20));

        notfiuser.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notfiuser.setForeground(new java.awt.Color(255, 0, 0));
        notfiuser.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                notfiuserKeyReleased(evt);
            }
        });
        jPanel1.add(notfiuser, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 120, 120, 20));

        jLabel1.setText("Avatar");
        jPanel1.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 510, -1, -1));

        txtimage.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtimageActionPerformed(evt);
            }
        });
        txtimage.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtimageKeyReleased(evt);
            }
        });
        jPanel1.add(txtimage, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 530, 250, -1));

        notifiimg.setFont(new java.awt.Font("Tahoma", 2, 11)); // NOI18N
        notifiimg.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(notifiimg, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 550, 130, 20));
        jPanel1.add(Addresstxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 220, 250, -1));

        Address.setText("Address");
        jPanel1.add(Address, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 200, -1, -1));

        btOpenFile.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/icons8_documents_20px_1.png"))); // NOI18N
        btOpenFile.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btOpenFileActionPerformed(evt);
            }
        });
        jPanel1.add(btOpenFile, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 530, 40, 30));

        imageSection.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        jPanel1.add(imageSection, new org.netbeans.lib.awtextra.AbsoluteConstraints(380, 500, 110, 120));

        jLabel2.setText("Date of birth");
        jPanel1.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 350, -1, -1));
        jPanel1.add(datetxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 370, 250, 30));

        background.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/background1.jpg"))); // NOI18N
        background.setText("jLabel2");
        jPanel1.add(background, new org.netbeans.lib.awtextra.AbsoluteConstraints(-410, 0, -1, -1));

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 640, 640));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void txtphonenActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtphonenActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtphonenActionPerformed

    private void txtusernameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtusernameFocusGained
     
    }//GEN-LAST:event_txtusernameFocusGained

    private void txtusernameFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtusernameFocusLost
      
    }//GEN-LAST:event_txtusernameFocusLost

    private void txtmailFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtmailFocusGained
      
    }//GEN-LAST:event_txtmailFocusGained

    private void txtmailFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtmailFocusLost
       
    }//GEN-LAST:event_txtmailFocusLost

    private void txtphonenFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtphonenFocusGained
   
    }//GEN-LAST:event_txtphonenFocusGained

    private void txtphonenFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtphonenFocusLost
       
    }//GEN-LAST:event_txtphonenFocusLost

    private void txtfullnameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfullnameFocusGained
        
      
    }//GEN-LAST:event_txtfullnameFocusGained

    private void txtfullnameFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfullnameFocusLost
       
    }//GEN-LAST:event_txtfullnameFocusLost

    private void RESETMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_RESETMouseClicked
         txtusername.setText("");
         txtphonen.setText("");
         txtfullname.setText("");
         txtconpass.setText("");
         txtmail.setText("");
         txtpass.setText("");
         txtimage.setText("");
    }//GEN-LAST:event_RESETMouseClicked

    private void CANCELMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_CANCELMouseClicked
        
          
    }//GEN-LAST:event_CANCELMouseClicked

    private void REGISActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_REGISActionPerformed
       try{
           Class.forName(driver).newInstance();
           String urlUnicode = "jdbc:mysql://103.97.125.254:3306/doanjava_v1?user=doanjava&password=a2DpigCp7PDOyGk&useUnicode=true&characterEncoding=utf8";
           conn = DriverManager.getConnection(urlUnicode); 
           String insert="INSERT INTO `Users`(`password`, `username`, `email`,`ngaySinh`,`diaChi`, `diemTichLuy`, `soDT`, `hoTen`, `avatar`, `maLoaiNguoiDung`) VALUES (?,?,?,?,?,?,?,?,?,?)";
           pst=conn.prepareStatement(insert);
           String pass=txtpass.getText();
          java.sql.Date date=new java.sql.Date(datetxt.getDate().getTime());

            if(pass!=null && !pass.isEmpty())
            {
               String hash = BCrypt.hashpw(pass, BCrypt.gensalt(10));
                pst.setString(1,hash);
            }
           pst.setString(2,txtusername.getText());
           pst.setString(3,txtmail.getText());
           pst.setDate(4,(Date)date);
           pst.setString(5,Addresstxt.getText());
           pst.setInt(6,0);
           pst.setString(7,txtphonen.getText());
           pst.setString(8,txtfullname.getText());
          
           pst.setString(9,txtimage.getText());
           pst.setInt(10,2);
         
           String confirmpass=txtconpass.getText();
 
            String mail=txtmail.getText();
            String regexmail="^[a-z0-9]*@{1}([\\w]+\\.[\\w]+|[\\w]+\\.[\\w]+\\.[\\w]+\\.[\\w]+|[\\w]+\\.[\\w]+\\.[\\w]+)$";
            String username=txtusername.getText();
            String regexusername="^[\\w]{3,}$";
            String userphone=txtphonen.getText();
            String regexuserphone="^0{1}[0-9]{8,9}$";
            String regexuserpassword="^[\\w]{8,}$";
            String img=txtimage.getText();
            String regeximage="^https?://(?:[a-z0-9\\-]+\\.)+[a-z]{2,6}(?:/[^/#?]+)+\\.(?:jpg|gif|png)$";
         
        
           
           if((!Pattern.matches(regexmail, mail))||(!Pattern.matches(regexusername, username))||(!Pattern.matches(regexuserphone, userphone))||(!Pattern.matches(regexuserpassword, pass))||(!Pattern.matches(pass, confirmpass))||(!Pattern.matches(regeximage, img)))
           {
                JOptionPane.showMessageDialog(null, "REGISTER UNSUCCESSFULLY","ERORR", JOptionPane.ERROR_MESSAGE);
           }
           else
           {
           
           pst.executeUpdate();
           JOptionPane.showMessageDialog(null,"REGISTER SUCCESSFULLY");
           login lg =new login();
           login.main(null);
           dispose();
           
           }
            pst.close();
            conn.close();
        }
        
         catch(SQLException se)
            {
               se.printStackTrace();
            }
        catch(Exception e)
           {
      
                e.printStackTrace();
            }finally{
         
                        try{
                                if(conn!=null)
                                    conn.close();
                            }catch(SQLException se)
                            {
                                    se.printStackTrace();
                            }
                    }
       String confirm=txtconpass.getText().toString();
       String pass=txtpass.getText().toString();
       
    }//GEN-LAST:event_REGISActionPerformed

    private void txtusernameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtusernameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtusernameActionPerformed

    private void txtmailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtmailActionPerformed
    
        
    }//GEN-LAST:event_txtmailActionPerformed

    private void txtmailKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtmailKeyPressed
        String mail=txtmail.getText();
        String regex="^[a-z0-9]*@{1}([\\w]+\\.[\\w]+|[\\w]+\\.[\\w]+\\.[\\w]+\\.[\\w]+|[\\w]+\\.[\\w]+\\.[\\w]+)$";
        Pattern emailpattern=Pattern.compile(regex);
        Matcher matcher=emailpattern.matcher(mail);
        if(!matcher.matches())
        {
            notifimail.setText("*Invalid email ");
        }
        else
        {
            notifimail.setText(null);
        }
    }//GEN-LAST:event_txtmailKeyPressed

    private void txtusernameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtusernameKeyReleased
        String username=txtusername.getText();
        String regex="^[\\w]{3,}$";
        Pattern patternuser=Pattern.compile(regex);
        Matcher match=patternuser.matcher(username);
        if(!match.matches())
        {
            notfiuser.setText("*At least 3 characters ");
        }
        else
        {
            notfiuser.setText(null);
        }
    }//GEN-LAST:event_txtusernameKeyReleased

    private void txtphonenKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtphonenKeyReleased
         String userphone=txtphonen.getText();
        String regex="^0{1}[0-9]{8,9}$";
        Pattern patternuser=Pattern.compile(regex);
        Matcher match=patternuser.matcher(userphone);
        if(!match.matches())
        {
            notifiphone.setText("*Invalid Phone number");
        }
        else
        {
            notifiphone.setText(null);
        }
    }//GEN-LAST:event_txtphonenKeyReleased

    private void txtpassKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtpassKeyReleased
        String userpassword=txtpass.getText();
        String regex="^[\\w]{8,}$";
        Pattern patternuser=Pattern.compile(regex);
        Matcher match=patternuser.matcher(userpassword);
        if(!match.matches())
        {
            notifipass.setText("*Use 8 characters or more \n"+"for your password");
        }
        else
        {
            notifipass.setText(null);
        }
    }//GEN-LAST:event_txtpassKeyReleased

    private void txtconpassKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtconpassKeyReleased
       String userpassword=txtpass.getText();
       String confirmpass=txtconpass.getText();
        Pattern patternuser=Pattern.compile(confirmpass);
        Matcher match=patternuser.matcher(userpassword);
        if(!match.matches())
        {
            notificonfirmpass.setText("*Those passwords didn’t match\n "+ ".Try again.");
        }
        else
        {
            notificonfirmpass.setText(null);
        }
    }//GEN-LAST:event_txtconpassKeyReleased

    private void txtimageActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtimageActionPerformed
      
    }//GEN-LAST:event_txtimageActionPerformed

    private void txtimageKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtimageKeyReleased
        String img=txtimage.getText();
        String regex="^https?://(?:[a-z0-9\\-]+\\.)+[a-z]{2,6}(?:/[^/#?]+)+\\.(?:jpg|gif|png)$";
        Pattern patternimg=Pattern.compile(regex);
        Matcher match=patternimg.matcher(img);
        if(!match.matches())
        {
            notifiimg.setText("*Invalid image");
        }
        else
        {
            notifiimg.setText(null);
        }
    }//GEN-LAST:event_txtimageKeyReleased

    private void CANCELActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CANCELActionPerformed
        login lg =new login();
           login.main(null);
           dispose();
    }//GEN-LAST:event_CANCELActionPerformed

    private void txtconpassActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtconpassActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtconpassActionPerformed

    private void RESETActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_RESETActionPerformed
        txtpass.setText("");
        txtusername.setText("");
        txtphonen.setText("");
        txtfullname.setText("");
        Addresstxt.setText("");
        txtmail.setText("");
        txtconpass.setText("");
        txtimage.setText("");
    }//GEN-LAST:event_RESETActionPerformed

    private void notfiuserKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_notfiuserKeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_notfiuserKeyReleased

    private void btOpenFileActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btOpenFileActionPerformed
        // TODO add your handling code here:
        JFileChooser fc = new JFileChooser();
        //        fc.setCurrentDirectory(new File(System.getProperty("user.home")));
        //        fc.setCurrentDirectory(new File(System.getProperty("user.dir")));
        try {
            fc.setCurrentDirectory(new File(getClass().getResource("./").toURI()));
        } catch (URISyntaxException ex) {
            Logger.getLogger(ThemPhim.class.getName()).log(Level.SEVERE, null, ex);
        }
        FileNameExtensionFilter filter = new FileNameExtensionFilter("*.Images", "jpg", "gif", "png");
        fc.addChoosableFileFilter(filter);
        fc.setDialogTitle("Chọn ảnh");
        int result = fc.showOpenDialog(null);
        if (result == JFileChooser.APPROVE_OPTION) {
            file = fc.getSelectedFile();
            System.out.println(file);
            imgurRequest(file);
        }
    }//GEN-LAST:event_btOpenFileActionPerformed
private void imgurRequest(File f) {
        try {
            String imgurClientId = "4d7220bef63dd30";
            Unirest.config().connectTimeout(1000);
            String response = Unirest.post("https://api.imgur.com/3/image")
                    .header("Authorization", "Client-ID " + imgurClientId)
                    .multiPartContent()
                    .field("image", file)
                    .asJson()
                    .getBody()
                    .getObject()
                    .getJSONObject("data")
                    .get("link")
                    .toString();
            txtimage.setText(response);
            showAnh(response);
        } catch (MalformedURLException ex) {
            Logger.getLogger(ThemPhim.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(Regis.this, "Xảy ra lỗi khi chọn ảnh phim vui lòng thử lại", "Có lỗi",
                    JOptionPane.ERROR_MESSAGE);
        }
    }

    private void showAnh(String name) throws MalformedURLException {
        try {
            URL url = new URL(name);
            Image img = ImageIO.read(url.openStream());
            Image newImg = img.getScaledInstance(imageSection.getWidth(), imageSection.getHeight(), Image.SCALE_SMOOTH);
            ImageIcon image = new ImageIcon(newImg);
            imageSection.setIcon(image);
        } catch (IOException ex) {
            Logger.getLogger(ThemPhim.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Regis.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Regis.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Regis.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Regis.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Regis().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel Address;
    private javax.swing.JTextField Addresstxt;
    private javax.swing.JButton CANCEL;
    private javax.swing.JLabel Email;
    private javax.swing.JLabel Hoten;
    private javax.swing.JButton REGIS;
    private javax.swing.JButton RESET;
    private javax.swing.JLabel SDT;
    private javax.swing.JLabel Username;
    private javax.swing.JLabel background;
    private javax.swing.JButton btOpenFile;
    private javax.swing.JLabel confirmpssw;
    private com.toedter.calendar.JDateChooser datetxt;
    private javax.swing.JLabel imageSection;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel notfiuser;
    private javax.swing.JLabel notificonfirmpass;
    private javax.swing.JLabel notifiimg;
    private javax.swing.JLabel notifimail;
    private javax.swing.JLabel notifipass;
    private javax.swing.JLabel notifiphone;
    private javax.swing.JLabel pssw;
    private javax.swing.JLabel title;
    private javax.swing.JPasswordField txtconpass;
    private javax.swing.JTextField txtfullname;
    private javax.swing.JTextField txtimage;
    private javax.swing.JTextField txtmail;
    private javax.swing.JPasswordField txtpass;
    private javax.swing.JTextField txtphonen;
    private javax.swing.JTextField txtusername;
    // End of variables declaration//GEN-END:variables
}
